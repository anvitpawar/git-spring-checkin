function parseProfileString(str) {
  if (!str) return [];

  const lines = str.split('\n');
  return lines.map((line) => {
    line = line.trim();
    if (!line) return { key: '__separator__', value: '' }; // for blank lines

    let key = '';
    let value = '';

    const colonIndex = line.indexOf(':');
    const equalIndex = line.indexOf('=');

    if (colonIndex !== -1) {
      key = line.slice(0, colonIndex).trim();
      value = line.slice(colonIndex + 1).trim();
    } else if (equalIndex !== -1) {
      key = line.slice(0, equalIndex).trim();
      value = line.slice(equalIndex + 1).trim();
    } else {
      key = line.trim(); // Only key, no value
    }

    // Remove wrapping quotes from key and value
    if (key.startsWith('"') && key.endsWith('"')) {
      key = key.slice(1, -1);
    }
    if (value.startsWith('"') && value.endsWith('"')) {
      value = value.slice(1, -1);
    }

    return { key, value };
  });
}